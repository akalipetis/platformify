{{- if .Database }}
export RELATIONSHIPS_JSON="$(echo ${{ .Assets.EnvPrefix }}_RELATIONSHIPS | base64 --decode)"

# Set database environment variables
export DB_HOSTNAME="${{ .DatabaseUpper }}_HOSTNAME"
export DB_PORT="${{ .DatabaseUpper }}_PORT"
export DB_PATH="${{ .DatabaseUpper }}_PATH"
export DB_USERNAME="${{ .DatabaseUpper }}_USERNAME"
export DB_PASSWORD="${{ .DatabaseUpper }}_PASSWORD"
export DB_SCHEME="${{ .DatabaseUpper }}_SCHEME"
export DATABASE_URL="${DB_SCHEME}://${DB_USERNAME}:${DB_PASSWORD}@${DB_HOSTNAME}:${DB_PORT}/${DB_PATH}"
{{- end -}}
{{- if .Cache }}

# Set Cache environment variables
export CACHE_HOSTNAME="${{ .CacheUpper }}_HOSTNAME"
export CACHE_PORT="${{ .CacheUpper }}_PORT"
export CACHE_SCHEME="${{ .CacheUpper }}_SCHEME"
export CACHE_URL="${CACHE_SCHEME}://${CACHE_HOSTNAME}:${CACHE_PORT}"
{{- end -}}
{{- if or (eq .Cache "redis") (eq .Cache "redis_persistent") }}

# Set Redis environment variables
export REDIS_URL="$CACHE_URL"
{{- end -}}
{{- if eq .Stack.Name "strapi" }}

# Strapi-specific environment variables
export JWT_SECRET="${{ .Assets.EnvPrefix }}_PROJECT_ENTROPY"
export API_TOKEN_SALT="${{ .Assets.EnvPrefix }}_PROJECT_ENTROPY"
{{- end -}}
